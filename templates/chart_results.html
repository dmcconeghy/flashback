{% extends 'base.html' %}

{% block title %} TEST {% endblock %}


{% block content %} 
<div class="container-fluid col-sm-12 col-md-10 col-lg-10 col-xl-8 col-xxl-6">
    <h1>The {{chart.name}} on {{chart.chart_date}} </h1>
	<div class="row bg-info">
		<div class="col-sm-9"> THIS WEEK {{chart.date}}
		</div>
		<div class="col-sm-1 small"> LAST WEEK
		</div>
		<div class="col-sm-1 small"> PEAK POSITION
		</div>
		<div class="col-sm-1 small"> WEEKS ON CHART
		</div>
	</div>
        
    {% for song, appearance in results %}
    
        <div class="row">
            <div class="col-sm-1 text-center align-middle"> {{appearance.rank}}
            </div>
            <div class="col-sm-1 ">
                <img class="img-fluid img-thumbnail" src="{{song.song_img_url}}" alt="default album image" width="50px">
            </div>
            <div class="col-sm-7 text-left align-middle">
                <form method="POST" 
                                action="/chart/{{chart.chart_date}}/favorite/{{song.id}}" 
                                class="float-left" 
                                name="favorite-form">
                                <button 
                                    class="btn p-0 mr-1" 
                                    type="submit"
                                    data-bs-toggle="tooltip" 
                                    data-bs-placement="top" 
                                    title="{{'Remove from favorites' if song.id in favorites else 'Add to favorites'}}">
                                    <i class="{{'fa-solid fa-star' if song.id in favorites else 'fa-regular fa-star'}}"></i>
                                 </button>
                             </form>
                {{song.title}} by {{song.artist}}
                
            </div>
            <div class="col-sm-1 text-center"> {{appearance.last_pos}}
            </div>
            <div class="col-sm-1 text-center">{{appearance.peak_pos}}
            </div>
            <div class="col-sm-1 text-center">{{appearance.weeks}}
            </div>
        </div>
    
    {% endfor %}
</div>

{% endblock %}

<!-- <li>
                    
                    {{entry.title}} by {{entry.artist}}
                    
                </li> -->

                <!-- <div class="card" style="width: 18rem">
                    <img src="{{ entry.image }}" class="card-img-top" alt=""/>
                    <div class="div card-body">
                        <img class="card-image" src="../static/media/musical_placeholder.jpg">
                        <h5 class="card-title">{{entry.rank}}:{{entry.title}} by {{entry.artist|truncate(20)}}</h5>
                        <p class="card-text">Highest position: {{entry.peakPos}} </p>
                        <p class="card-text">{{entry.weeks}} weeks on chart</p>
                        
                    </div>
                </div> -->